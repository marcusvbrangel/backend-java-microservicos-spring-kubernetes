
-----------------------------------------------------------

http://com.shop.local/users

http://com.shop.local/products
http://com.shop.local/products/PROD-0003

http://com.shop.local/shops/user/23456789012
http://com.shop.local/shops/user/23456789012
http://com.shop.local/shops/report?dataInicio=01/01/2002&dataFim=01/01/2026


Agora (limpo):
  - http://com.shop.local/users
  - http://com.shop.local/products
  - http://com.shop.local/shops/search



--------------------------------------------------------------------------------------

üìä An√°lise: Configurar Ingress

  Estado Atual:

  ‚úÖ Ingress Controller: NGINX j√° instalado (21 dias)
  ‚úÖ IngressClass: nginx dispon√≠vel
  ‚úÖ Addon: ingress habilitado ‚úÖ
  ‚ö†Ô∏è Arquivo Ingress: shop-ingress.yaml vazio (n√£o configurado)

  Services Atuais:

  | Service          | Type      | IP Interna    | Porta |
  |------------------|-----------|---------------|-------|
  | user-api         | ClusterIP | 10.105.238.70 | 8081  |
  | product-api      | ClusterIP | 10.103.85.2   | 8082  |
  | shop-api         | ClusterIP | 10.105.201.23 | 8083  |
  | postgres-service | ClusterIP | 10.96.181.102 | 5432  |

  IP do Minikube: 192.168.49.2

  ---
  üéØ Minha Opini√£o:

  ‚úÖ SIM, voc√™ deveria configurar Ingress!

  Raz√µes:

  1. Infraestrutura j√° pronta
    - NGINX Ingress Controller instalado
    - Nenhuma configura√ß√£o adicional necess√°ria
  2. Benef√≠cios:
    - Acesso √∫nico via URL (ex: api.minikube.local)
    - Roteamento baseado em path (/users, /products, /shop)
    - Melhor que acessar servi√ßos individuais por porta
    - Simula ambiente de produ√ß√£o
  3. Para desenvolvimento:
    - Teste load balancing
    - Pratique roteamento HTTP
    - Configure SSL/TLS (aprendizado)
    - Teste health checks
  4. Simplifica acesso:
  # Sem Ingress (atual)
  curl http://localhost:8081/users
  curl http://localhost:8082/products
  curl http://localhost:8083/shop

  # Com Ingress
  curl http://api.minikube.local/users
  curl http://api.minikube.local/products
  curl http://api.minikube.local/shop

  ---
  ‚ö†Ô∏è Considera√ß√µes:

  N√£o bloqueia nada:
  - Services continuam funcionando normalmente
  - Ingress √© apenas uma camada acima
  - Pode remover depois se n√£o gostar

  Setup simples no minikube:
  - N√£o precisa de DNS real
  - S√≥ adicionar no /etc/hosts:
  192.168.49.2  api.minikube.local

  ---
  üí° Pr√≥ximos Passos (se decidir fazer):

  1. Configurar o Ingress com roteamento por path
  2. Apontar para as 3 APIs (user, product, shop)
  3. Testar acesso via URL √∫nica
  4. (Opcional) Configurar SSL/TLS
  5. (Opcional) Testar com 2 r√©plicas e ver load balancing

  Vale muito a pena! √â um step importante para aprender padr√µes de produ√ß√£o. üëç

---------------------------------------------------------------------------------

Perfeito! ‚úÖ Ingress configurado com sucesso!

  üìã Resumo da Configura√ß√£o:

  | Campo         | Valor              |
  |---------------|--------------------|
  | Host          | com.shop.local     |
  | Ingress Class | nginx              |
  | Controller    | Ativo e pronto     |
  | Roteamento    |                    |
  | ‚îú‚îÄ /users     | ‚Üí user-api:8081    |
  | ‚îú‚îÄ /products  | ‚Üí product-api:8082 |
  | ‚îî‚îÄ /shop      | ‚Üí shop-api:8083    |

  ---
  üöÄ Como Usar:

  1. Adicione ao /etc/hosts:

  sudo nano /etc/hosts

  Adicione esta linha:
  192.168.49.2 com.shop.local

  2. Teste os endpoints:

  # User API
  curl http://com.shop.local/users

  # Product API
  curl http://com.shop.local/products

  # Shop API
  curl http://com.shop.local/shop

  3. Teste com browser:

  http://com.shop.local/users
  http://com.shop.local/products
  http://com.shop.local/shop

  ---
  ‚ú® O que voc√™ ganhou:

  ‚úÖ URL √∫nica para todas as APIs
  ‚úÖ Roteamento baseado em path
  ‚úÖ Load balancing autom√°tico (v√™ os 2 IPs por servi√ßo?)
  ‚úÖ Simula√ß√£o de ambiente de produ√ß√£o
  ‚úÖ NGINX Ingress Controller ativo


---------------------------------------------------------------------------



